---
// src/pages/api/transform.astro
/**
 * Transforms text input (converts to uppercase, reverses it, etc.)
 */
export const partial = true;
export const prerender = false;

let transformed = '';
let original = '';

if (Astro.request.method === "POST") {
  try {
    const data = await Astro.request.formData();
    original = data.get("text")?.toString() || '';
    
    // Transform the text
    transformed = original.toUpperCase();
    const reversed = original.split('').reverse().join('');
    const length = original.length;
    
  } catch (error) {
    if (error instanceof Error) {
      Astro.response.status = 400;
    }
  }
}
---

{transformed && (
  <div class="result">
    <p><strong>Original:</strong> {original}</p>
    <p><strong>Uppercase:</strong> {transformed}</p>
    <p><strong>Reversed:</strong> {original.split('').reverse().join('')}</p>
    <p><strong>Length:</strong> {original.length} characters</p>
  </div>
)}